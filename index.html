<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<title>Ø±Ø¤ÙŠØ© - Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    * { box-sizing: border-box; }
    body {
        background-color: #111;
        color: gold;
        font-family: Arial, sans-serif;
        padding: 20px;
    }
    h1 { text-align: center; }
    .section-btn {
        font-size: 22px;
        padding: 18px 0;
        width: 100%;
        border-radius: 12px;
        margin: 15px auto;
        background-color: gold;
        color: #111;
        border: none;
        display: block;
        cursor: pointer;
    }
    .form-section {
        display: none;
        background-color: #222;
        margin-top: 10px;
        padding: 15px;
        border-radius: 10px;
    }
    input, button {
        width: 100%;
        padding: 14px;
        margin: 5px 0;
        border-radius: 6px;
        border: none;
        font-size: 20px;
    }
    .label {
        margin-top: 10px;
        display: block;
        color: #ffc;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
        color: gold;
    }
    th, td {
        border: 1px solid #444;
        padding: 10px;
        text-align: center;
    }
    th {
        background-color: #333;
    }
    td {
        background-color: #222;
    }
    button.delete-btn {
        background: none;
        border: none;
        color: red;
        font-size: 20px;
        cursor: pointer;
    }
</style>
</head>
<body>
<h1>
  <img src="rooo.png" alt="Ø´Ø¹Ø§Ø± Ø±Ø¤ÙŠØ©" style="width: 160px; max-width: 80%; display: block; margin: 20px auto;">
</h1>

<!-- Ù‚Ø³Ù… Ø§Ù„Ø¯Ø®Ù„ -->
<button class="section-btn" onclick="toggleSection('income')">ğŸ’° Ù‚Ø³Ù… Ø§Ù„Ø¯Ø®Ù„</button>
<div class="form-section" id="income">
    <label class="label">Ø§Ù„ÙˆØµÙ</label><input id="in_desc" type="text"/>
    <label class="label">Ø§Ù„Ù…Ø¨Ù„Øº</label><input id="in_amount" type="number"/>
    <button onclick="saveIncome()">ğŸ’¾ Ø­ÙØ¸</button>
    <div id="incomeList"></div>
</div>

<!-- Ù‚Ø³Ù… Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª -->
<button class="section-btn" onclick="toggleSection('expenses')">ğŸ“¤ Ù‚Ø³Ù… Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</button>
<div class="form-section" id="expenses">
    <label class="label">Ø§Ù„ÙˆØµÙ</label><input id="ex_desc" type="text"/>
    <label class="label">Ø§Ù„Ù…Ø¨Ù„Øº</label><input id="ex_amount" type="number"/>
    <button onclick="saveExpense()">ğŸ’¾ Ø­ÙØ¸</button>
    <div id="expensesList"></div>
</div>

<!-- Ù‚Ø³Ù… Ø§Ù„Ø£Ù…ÙˆØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø±Ø¬ -->
<button class="section-btn" onclick="toggleSection('foreignFunds')">ğŸ’¸ Ù‚Ø³Ù… Ø§Ù„Ø£Ù…ÙˆØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø±Ø¬</button>
<div class="form-section" id="foreignFunds">
    <label class="label">Ø§Ù„ÙˆØµÙ</label><input id="ff_desc" type="text"/>
    <label class="label">Ø§Ù„Ù…Ø¨Ù„Øº</label><input id="ff_amount" type="number"/>
    <button onclick="saveForeignFund()">ğŸ’¾ Ø­ÙØ¸</button>
    <div id="foreignFundsList"></div>
</div>

<!-- Ù‚Ø³Ù… ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ -->
<button class="section-btn" onclick="toggleSection('reports')">ğŸ“Š ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</button>
<div class="form-section" id="reports">
    <div id="reportContent"></div>
</div>

<!-- Ù‚Ø³Ù… ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø£Ù…ÙˆØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø±Ø¬ -->
<button class="section-btn" onclick="toggleSection('foreignReports')">ğŸŒ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø£Ù…ÙˆØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø±Ø¬</button>
<div class="form-section" id="foreignReports">
    <div id="foreignReportContent"></div>
</div>

<!-- Ù‚Ø³Ù… Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª -->
<button class="section-btn" onclick="toggleSection('totalExpenses')">ğŸ“¦ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</button>
<div class="form-section" id="totalExpenses">
    <div id="totalExpensesContent"></div>
</div>

<script>
    const toggleSection = id => {
        const section = document.getElementById(id);
        const isOpen = section.style.display === 'block';
        document.querySelectorAll('.form-section').forEach(sec => sec.style.display = 'none');
        if (!isOpen) {
            section.style.display = 'block';
            if (id === 'reports') showReport();
            if (id === 'foreignReports') showForeignReport();
            if (id === 'totalExpenses') showTotalExpenses();
        }
    }

    let income = JSON.parse(localStorage.getItem("income") || "[]");
    let expenses = JSON.parse(localStorage.getItem("expenses") || "[]");
    let foreignFunds = JSON.parse(localStorage.getItem("foreignFunds") || "[]");

    const saveIncome = () => {
        let entry = {
            desc: in_desc.value,
            amount: parseFloat(in_amount.value),
            date: new Date().toLocaleDateString('ar-EG')
        };
        income.push(entry);
        localStorage.setItem("income", JSON.stringify(income));
        showIncome();
    }

    const saveExpense = () => {
        let entry = {
            desc: ex_desc.value,
            amount: parseFloat(ex_amount.value),
            date: new Date().toLocaleDateString('ar-EG')
        };
        expenses.push(entry);
        localStorage.setItem("expenses", JSON.stringify(expenses));
        showExpenses();
    }

    const saveForeignFund = () => {
        let entry = {
            desc: ff_desc.value,
            amount: parseFloat(ff_amount.value),
            date: new Date().toLocaleDateString('ar-EG')
        };
        foreignFunds.push(entry);
        localStorage.setItem("foreignFunds", JSON.stringify(foreignFunds));
        showForeignFunds();
    }

    const showIncome = () => {
        if (income.length === 0) return incomeList.innerHTML = "<p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¯Ø®Ù„ Ù…Ø³Ø¬Ù„.</p>";
        incomeList.innerHTML = `
        <table><thead><tr><th>Ø§Ù„ÙˆØµÙ</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø­Ø°Ù</th></tr></thead><tbody>
        ${income.map((e, i) => `
            <tr><td>${e.desc}</td><td>${e.amount}</td><td>${e.date}</td>
            <td><button class="delete-btn" onclick="deleteIncome(${i})">âŒ</button></td></tr>
        `).join("")}</tbody></table>`;
    }

    const showExpenses = () => {
        if (expenses.length === 0) return expensesList.innerHTML = "<p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ØµØ±ÙˆÙØ§Øª.</p>";
        expensesList.innerHTML = `
        <table><thead><tr><th>Ø§Ù„ÙˆØµÙ</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø­Ø°Ù</th></tr></thead><tbody>
        ${expenses.map((e, i) => `
            <tr><td>${e.desc}</td><td>${e.amount}</td><td>${e.date}</td>
            <td><button class="delete-btn" onclick="deleteExpense(${i})">âŒ</button></td></tr>
        `).join("")}</tbody></table>`;
    }

    const showForeignFunds = () => {
        if (foreignFunds.length === 0) return foreignFundsList.innerHTML = "<p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø£Ù…ÙˆØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø±Ø¬.</p>";
        foreignFundsList.innerHTML = `
        <table><thead><tr><th>Ø§Ù„ÙˆØµÙ</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø­Ø°Ù</th></tr></thead><tbody>
        ${foreignFunds.map((e, i) => `
            <tr><td>${e.desc}</td><td>${e.amount}</td><td>${e.date}</td>
            <td><button class="delete-btn" onclick="deleteForeignFund(${i})">âŒ</button></td></tr>
        `).join("")}</tbody></table>`;
    }

    const deleteIncome = i => {
        if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø®Ù„ØŸ")) {
            income.splice(i, 1);
            localStorage.setItem("income", JSON.stringify(income));
            showIncome();
        }
    }

    const deleteExpense = i => {
        if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…ØµØ±ÙˆÙØŸ")) {
            expenses.splice(i, 1);
            localStorage.setItem("expenses", JSON.stringify(expenses));
            showExpenses();
        }
    }

    const deleteForeignFund = i => {
        if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¬Ù„ØŸ")) {
            foreignFunds.splice(i, 1);
            localStorage.setItem("foreignFunds", JSON.stringify(foreignFunds));
            showForeignFunds();
        }
    }

    const showReport = () => {
        let totalIncome = income.reduce((sum, e) => sum + e.amount, 0);
        let totalExpenses = expenses.reduce((sum, e) => sum + e.amount, 0);
        let profit = totalIncome - totalExpenses;
        reportContent.innerHTML = `
            <h2>ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</h2>
            <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„: <strong>${totalIncome} Ø¬Ù†ÙŠÙ‡</strong></p>
            <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª: <strong>${totalExpenses} Ø¬Ù†ÙŠÙ‡</strong></p>
            <p>ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­: <strong>${profit} Ø¬Ù†ÙŠÙ‡</strong></p>
        `;
    }

    const showForeignReport = () => {
        let total = foreignFunds.reduce((sum, e) => sum + e.amount, 0);
        foreignReportContent.innerHTML = `
            <h2>ğŸŒ Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ù…ÙˆØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø±Ø¬</h2>
            <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ù…ÙˆØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø±Ø¬: <strong>${total} Ø¬Ù†ÙŠÙ‡</strong></p>
        `;
    }

    const showTotalExpenses = () => {
        let total = expenses.reduce((sum, e) => sum + e.amount, 0);
        totalExpensesContent.innerHTML = `
            <h2>ğŸ“¦ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h2>
            <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª: <strong>${total} Ø¬Ù†ÙŠÙ‡</strong></p>
        `;
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­
    showIncome();
    showExpenses();
    showForeignFunds();
    showTotalExpenses();
</script>
</body>
</html>
